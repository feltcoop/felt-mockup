<script>
	import PersonWorld from '@app/person/PersonWorld.svelte';
	import AvatarWorld from '@app/avatar/AvatarWorld.svelte';
	import CommunityWorld from '@app/community/CommunityWorld.svelte';
	import PageWorld from '@app/page/PageWorld.svelte';
	import ErrorMessage from '@app/ui/ErrorMessage.svelte';

	export let world;
</script>

<!-- TODO where should this padding ideally go? -->
<div class="flex flex-col flex-1 p-2" style="max-width: 640px;">
	<!-- TODO componentize - SpaceBreadcrumb or PathBreadcrumb or SlugBreadcrumb -->
	<!-- TODO make this transition with the equivalent component (and DOM element) in `<Space/>` -->
	<div>
		<a
			class="text-2xl active-world-link relative bg-purple-100 px-4
			cursor-default border-dashed rounded-tr-lg rounded-bl-lg border-l-4
			border-r-4 border-t-2 border-b-2 border-purple-200 font-normal"
			href={$world.slug}>
			{$world.title}
		</a>
	</div>
	{#if $world.description}
		{@html $world.description}
	{/if}
	<!-- 
	{#each $world.children as space}
		<Space {world} {space} />
	{/each} -->
	<div class="flex-1">
		{#if $world.type === 'person'}
			<PersonWorld {world} />
		{:else if $world.type === 'avatar'}
			<AvatarWorld {world} />
		{:else if $world.type === 'community'}
			<CommunityWorld {world} />
		{:else if $world.type === 'page'}
			<PageWorld {world} />
		{:else}
			<ErrorMessage message={`Unknown world type "${$world.type}"`} />
		{/if}
	</div>
</div>

<style lang="postcss">
	.active-world-link {
		@apply text-purple-400 !important;
	}
	.active-world-link:active {
		top: -1px;
		@apply border-purple-300;
	}
</style>
