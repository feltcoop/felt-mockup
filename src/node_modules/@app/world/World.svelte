<script>
	import PersonWorld from '@app/person/PersonWorld.svelte';
	import AvatarWorld from '@app/avatar/AvatarWorld.svelte';
	import CommunityWorld from '@app/community/CommunityWorld.svelte';
	import PageWorld from '@app/page/PageWorld.svelte';
	import ErrorMessage from '@app/ui/ErrorMessage.svelte';
	import Content from '@app/ui/Content.svelte';

	export let world;
</script>

<!-- TODO where should this padding ideally go? -->
<div class="flex flex-col flex-1 p-2" style="max-width: 640px;">
	<!-- TODO componentize - SpaceBreadcrumb or PathBreadcrumb or SlugBreadcrumb -->
	<Content>
		<h1>
			<!-- TODO make this transition with the equivalent component (and DOM element) in `<Space/>` -->
			<a
				class="active-world-link relative bg-purple-100 px-4 cursor-default
				border-dashed rounded-tr-lg rounded-bl-lg border-l-4 border-r-4
				border-t-2 border-b-2 border-purple-200"
				href={$world.slug}>
				{$world.title}
			</a>
		</h1>
		{#if $world.description}
			{@html $world.description}
		{/if}
	</Content>
	<!-- 
	{#each $world.children as space}
		<Space {world} {space} />
	{/each} -->
	<div class="flex-1">
		{#if $world.type === 'person'}
			<PersonWorld {world} />
		{:else if $world.type === 'avatar'}
			<AvatarWorld {world} />
		{:else if $world.type === 'community'}
			<CommunityWorld {world} />
		{:else if $world.type === 'page'}
			<PageWorld {world} />
		{:else}
			<ErrorMessage message={`Unknown ch type "${$world.type}"`} />
		{/if}
	</div>
</div>

<style lang="postcss">
	.active-world-link {
		@apply text-purple-400 !important;
	}
	.active-world-link:active {
		top: -1px;
		@apply border-purple-300;
	}
</style>
